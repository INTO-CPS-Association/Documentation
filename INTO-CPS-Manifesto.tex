% !TeX encoding = UTF-8
% !TeX spellcheck = en_GB

%%% Add [final] option to the report class to switch between draft and final version of the report
%%% Use [narrowmargin] to enable narrow margins - this may impair readability.
%\documentclass[a4paper,12pt,draft]{include/intocpsreport}   %Or
\documentclass[a4paper,12pt,final]{include/intocpsassociation}   %Or
% intocpslargereport if chapters are required.
%
%
%
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{longtable}
%\usepackage{tikz-uml}
\usepackage{framed}
\usepackage{subcaption}
\usepackage[hyphenbreaks]{breakurl}
\usepackage{color}
\usepackage{amsmath}
\usepackage{courier}
\usepackage{xspace}
\usepackage{cleveref}
\usepackage{subcaption}
\usepackage{paralist}
\usepackage{textcomp} % Used for 20-sim section \textrightarrow
%\usepackage{showframe}
\usepackage{titlesec}
\titlespacing*{\paragraph}{0pt}{0.5\baselineskip}{\baselineskip}
\usepackage{listingsVDM}
\usepackage{enumitem}
\usepackage{pdfpages}
\usepackage{tocbibind}

\usepackage{listings}
%\input{listings-modelica.cfg}

\usepackage{acronym}
\acrodef{mdt}[MDT]{MAN Diesel \& Turbo}
\acrodef{sil}[SIL]{Software In the Loop}
\acrodef{ct}[CT]{Continuous-Time}
\acrodef{mdse}[DSE]{Dynamic Simulation Environment}
\acrodef{hil}[HIL]{Hardware In the Loop}
\acrodef{intocps}[INTO-CPS]{Integrated Tool Chain for Model-based Design of Cyber-Physical Systems}
\acrodef{os}[OS]{Operating System}
\acrodef{fmi}[FMI]{Functional Mock-up Interface}
\acrodef{coe}[COE]{Co-simulation Orchestration Engine}
\acrodef{egr}[EGR]{Exhaust Gas Recirculation}

\newcommand{\Overture}{\raisebox{-0.2ex}[0pt][0pt]{\includegraphics[height=2ex]{figures/Overture}}}
\newcommand{\TwentySim}{\raisebox{-0.2ex}[0pt][0pt]{\includegraphics[height=2ex]{figures/20sim}}}
\newcommand{\OpenModelica}{\raisebox{-0.2ex}[0pt][0pt]{\includegraphics[height=1.6ex]{figures/OpenModelica}}}
\newcommand{\Modelio}{\raisebox{-0.2ex}[0pt][0pt]{\includegraphics[height=2ex]{figures/Modelio}}}
\newcommand{\Crescendo}{\raisebox{-0.2ex}[0pt][0pt]{\includegraphics[height=2ex]{figures/Crescendo}}}
\newcommand{\INTOCPS}{\raisebox{-0.2ex}[0pt][0pt]{\includegraphics[height=2ex]{figures/INTO}}}
\newcommand{\RTTester}{\raisebox{-0.2ex}[0pt][0pt]{\includegraphics[height=2ex]{figures/RTTester}}}
\newcommand{\CyPhyCircus}{\emph{CyPhyCircus}\xspace}
\newcommand{\Circus}{\emph{Circus}\xspace}


% The VDMlisting package loads the times package which changes the font so we just mark it as loaded to prevent the load.
\makeatletter
\@namedef{ver@times.sty}{}% a fake for a "loaded" package
\makeatother
\usepackage{vdmlisting}

%% Define listing environment for XML
\definecolor{gray}{rgb}{0.4,0.4,0.4}
\definecolor{darkblue}{rgb}{0.0,0.0,0.6}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}

\lstset{
  basicstyle=\footnotesize\ttfamily,
  columns=fullflexible,
  showstringspaces=false,
  commentstyle=\color{gray}\upshape
}

\lstdefinelanguage{XML}
{
  morestring=[b]",
  morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  stringstyle=\color{black},
  identifierstyle=\color{darkblue},
  keywordstyle=\color{cyan},
  morekeywords={xmlns,version,type}% list your attributes here
}


\lstnewenvironment{xml}[1][]{\lstset{  language=XML,
  morekeywords={encoding, xs:schema,xs:element,xs:complexType,xs:sequence,xs:attribute}}\lstset{#1}}
{}

%% end listing environment for XML
%
%
%
\def\draftnote#1{\noindent\smallskip\framebox{\begin{minipage}{0.95\columnwidth}\color{red}#1\end{minipage}}\smallskip\par}
\newenvironment{draftnoteenv}{\noindent\smallskip\begin{framed}\begin{minipage}{0.95\columnwidth}\color{red}}{\end{minipage}\end{framed}\smallskip\par}
\newenvironment{assumption}{\noindent\smallskip\color{blue}\begin{framed}\begin{minipage}{0.95\columnwidth}}{\end{minipage}\end{framed}\smallskip\par}
%
%
%
\newcommand{\revisit}[1]{\textcolor{red}{\pmb{[[[}\@ #1\@ \pmb{]]]}}}
\newcommand{\intoapp}{INTO-CPS Application}
\newcommand{\into}{INTO-CPS\xspace}


% Enable/Disable comments.
\newif\ifcomments
\commentstrue

\newcommand{\claudio}[1]{%
\ifcomments %
{\bfseries \scriptsize \color{red} Claudio: #1} %
\else %
 %
\fi%
}%



%
%
%\reportnumber{D4.3a}
\reporttitle{The INtegrated TOolchain for Cyber-Physical Systems (INTO-CPS): a Guide}
%\reporttitle{The INTO-CPS Manifesto}
%\reporttitle{User Manual for the INTO-CPS Tool Chain}
%\shortreporttitle{The INTO-CPS Manifesto}  %To use if report title is too long for header
\shortreporttitle{The INTO-CPS Guide}  %To use if report title is too long for header%
%
%
%%% Set document release class as appropriate
%%% e.g. Public, Restricted, Programme Participant
\reportstatus{Public}
%
%
%
%%% If document is a deliverable, this flag should be commented out
%%% e.g. %\technotetrue
%%% If report is a technical report, leave uncommented
%%% e.g. \technotetrue
%\technotetrue % Comment out as appropriate
%
%
\def\into{INTO-CPS}
\def\SG{Smart Grid}
\def\term#1{\textbf{\emph{#1}}}
%
%
%
%
\submissiondate{October, 2018}
\contributors{
Peter Gorm Larsen, Aarhus University\\
John Fitzgerald, Newcastle University\\
Jim Woodcock, University of York\\
Christian K\"{o}nig, TWT\\
Stylianos Basagiannis, UTRC\\
Etienne Brosse, Softeam\\
Cl√°udio Gomes, University of Antwerp\\
Jos\'{e} Cabral, Fortiss \\
Hugo Daniel Macedo, Aarhus University\\
Casper Thule, Aarhus University\\
Andrey Sadovykh, Softeam\\
Constantin-Bala Zamfirescu,``Lucian Blaga'', University of Sibiu\\
Mihai Neghina, ``Lucian Blaga'', University of Sibiu\\
Ken Pierce, Newcastle University\\
Carl Gamble, Newcastle University\\
Richard Payne, Newcastle University
}

\editors{
  Peter Gorm Larsen, Aarhus University\\
  John Fitzgerald, Newcastle University
}

\addversion{0.1}{23-04-2018}{Peter Gorm Larsen}{Initial version.}
\addversion{0.2}{01-06-2018}{Hugo Daniel Macedo}{Added MAN D\&T text.}
\addversion{0.3}{04-07-2018}{Mihai Neghina}{Added IPP4CPPS case.}
\addversion{0.4}{20-07-2018}{Christian K\"onig}{Added tool chain section.}
\addversion{0.5}{26-07-2018}{Stylianos Basagiannis}{Completed case studies.}
\addversion{0.6}{20-08-2018}{Jim Woodcock}{Added section of foundations.}
\addversion{0.7}{23-08-2018}{Claudio Gomes}{Added related work section.}
\addversion{0.8}{01-09-2018}{John Fitzgerald}{Added methods section.}
\addversion{0.9}{21-09-2018}{John Fitzgerald}{Edited methods section.}
\addversion{1.0}{07-10-2018}{Peter Gorm Larsen \& John Fitzgerald}{Global Edit.}


%
%
\begin{document}
\maketitle
%
%
%
%%%% Document abstract page %%%%
\section*{Abstract}
\label{sec:abstract}
%
%\fbox{John Fitzgerald}
The successful design, implementation and maintenance of Cyber-Physical Systems (CPSs) requires collaboration between diverse engineering disciplines and organisations, each of which may use radically different tools and notations.
The INtegrated TOolchain for Cyber-Physical Systems (INTO-CPS) is an open framework that permits the coupling of tools for model-based CPS engineering. Its formal foundations and the use of the Functional Mockup Interface standard permit the coherent integration of tools that describe CPS architecture, data, and discrete-event and continuous-time models of system elements. This allows engineers to produce collaborative models (co-models) and undertake co-simulation of behaviour at the whole-CPS level. 
It permits the machine-assisted trade space analysis, analytic detection and resolution of defects, generation of tests and of code. 
\claudio{It's not clear what ``trade space analysis'', ``analytic'', means. Are these defined in the rest of the doc? Are these familiar to readers of this paper?}
The value of the approach in reducing time to market and particular in 
\claudio{``in particular'' instead of ``particular in''?}
reducing the number of physical prototype iterations required in product development, has been demonstrated in industry.

This report is a guide to INTO-CPS. It includes a review of the challenges facing CPS engineers today and argues for open and integrated tool chains. The INTO-CPS technology is described briefly, and the semantic foundation of the approach is outlined. Methods for exploiting the toolchain within existing systems engineering processes are outlined, and the current toolchain itself is described alongside several industry studies. We argue that the future of CPS engineering relies on the integration of existing tools and processes, and we offer a potential roadmap for future research in the field, notably in realising the potential of co-models as digital twins using machine learning in order to gain intelligence.
\claudio{There is a bit of redundancy in the above paragraph: it is said twice that we argue for integrated tools chains. Maybe remove the first occurence?}
\newpage
%
%%%% Document table of contents page %%%%
\tableofcontents
\newpage
%
%
%
%%%% Document Content %%%%
%% \chapter{Chapter Title} %% if intocpslargereport is in use
%\begin{assumption}
%
%
%
\input{sections/intro.tex}
\clearpage
\input{sections/challenges.tex}
\clearpage
\input{sections/nutshell.tex}
\clearpage
\input{sections/foundations.tex}
\clearpage
\input{sections/method.tex}
\clearpage
%{sections/advanced.tex}
%\clearpage
\input{sections/toolchain.tex}
\clearpage
\input{sections/casestudies.tex}
\clearpage
\input{sections/related.tex}
\clearpage
\input{sections/future.tex}
\clearpage
%
%
%
%
%%%% Bibliography %%%%
\bibliographystyle{alpha}
\bibliography{bibliography,intocps,intocpsdev,foundations,bibliography_claudio}
\label{ch:bib} %label to refer to
%
%
%
\clearpage
%
%
%
\appendix
\input{appendices/acronyms.tex}
\clearpage
%\input{appendices/principles.tex}
%\clearpage
\input{appendices/backgroundontools.tex}
%
%
%
\end{document}
